# 20240731 [TIL] 코딩테스트, MSA (Api GW, 보안구성, Config)
<br>

---
<br>
<br>
<br>

```
 코딩테스트 중에 약수의 합 문제에서 약수를 찾는 최적화 알고리즘을 찾아보았다.
 MSA 강의중 Api GW, 보안구성, Config 강의를 들었다. TIL 은 개념을 따라치면서 개념정리를 해야겠다.
 빠르게 완강후 복습할 예정이다. 
```
---

## 약수 찾는 최적화 알고리즘
- 시간 복잡도 O(√<sup>n</sup>)   
- 약수는 대칭성을 갖기 때문에 제곱근을 먼저 구하고 그 수보다 작거나 같은 수로 먼저 나누고   
 나누어 떨어지는 수를 찾고 그수로 나눈 값 까지 포함 시키면 약수를 찾을수 있다   
 반복문으로 하나씩 다 나누면 숫자가 커질수록 시간 복잡도가 올라 가기때문에 제곱근을 먼저 구한후   
 찾는 방법으로 최적화 할수 있다.

    ```java
        static class Solution {
            public static int solution(int n) {
                int answer = 0;
                int sqrt = (int) Math.sqrt(n);
                for(int i = 1 ; i <= sqrt; i++){
                    if(n % i == 0){
                        answer += i;
                        if(i != n / i){
                            answer += n / i;
                        }
                    }
                }
                return answer;
            }
        }
   ```
---
## API 게이트웨이 (Spring Cloud Gateway)

### 1.1 API 게이트웨이란?

- API 게이트웨이는 클라이언트의 요청을 받아 백엔드 서비스로 라우팅하고, 다양한 부가 기능을 제공하는 중간 서버다.
- 클라이언트와 서비스 간의 단일 진입점 역할을 하며, 보안, 로깅, 모니터링, 요청 필터링 등을 처리한다.

### 1.2 API 게이트웨이의 주요 기능

- **라우팅**: 클라이언트 요청을 적절한 서비스로 전달
- **인증 및 권한 부여**: 요청의 인증 및 권한을 검증
- **로드 밸런싱**: 여러 서비스 인스턴스 간의 부하 분산
- **모니터링 및 로깅**: 요청 및 응답을 로깅하고 모니터링
- **요청 및 응답 변환**: 요청과 응답을 변환하거나 필터링


### 2.1 Spring Cloud Gateway란?

- Spring Cloud Gateway는 Spring 프로젝트의 일환으로 개발된 API 게이트웨이로, 클라이언트 요청을 적절한 서비스로 라우팅하고 다양한 필터링 기능을 제공한다.
- Spring Cloud Netflix 패키지의 일부로, 마이크로서비스 아키텍처에서 널리 사용된다.

### 2.2 Spring Cloud Gateway의 주요 특징

- **동적 라우팅**: 요청의 URL 패턴에 따라 동적으로 라우팅
- **필터링**: 요청 전후에 다양한 작업을 수행할 수 있는 필터 체인 제공
- **모니터링**: 요청 로그 및 메트릭을 통해 서비스 상태 모니터링
- **보안**: 요청의 인증 및 권한 검증

<details>
    <SUMMARY> 게이트위에 작동 이미지</SUMMARY>

![Untitled](https://teamsparta.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F83c75a39-3aba-4ba4-a792-7aefe4b07895%2F6d07e933-f3a0-4a71-83e5-63c8ef4558c8%2FUntitled.png?table=block&id=b1289a79-3949-40ff-b3f3-d74c73e58fe7&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&width=2000&userId=&cache=v2)
</details>

---
## 보안 구성 (OAuth2 + JWT)


### 1.1 보안의 중요성

- 마이크로서비스 아키텍처에서는 각 서비스가 독립적으로 배포되고 통신하기 때문에 보안이 매우 중요하다.
- 데이터 보호, 인증 및 권한 부여, 통신 암호화 등을 통해 시스템의 보안성을 확보해야 한다.


### 2.1 OAuth2란?

- OAuth2는 ***토큰 기반의*** 인증 및 권한 부여 프로토콜이다.
- 클라이언트 애플리케이션이 리소스 소유자의 권한을 얻어 보호된 리소스에 접근할 수 있도록 한다.
- OAuth2는 네 가지 역할을 정의한다: 리소스 소유자, 클라이언트, 리소스 서버, 인증 서버

### 2.2 OAuth2의 주요 개념

- **Authorization Code Grant**: 인증 코드를 사용하여 액세스 토큰을 얻는 방식
- **Implicit Grant**: 클라이언트 애플리케이션에서 직접 액세스 토큰을 얻는 방식
- **Resource Owner Password Credentials Grant**: 사용자 이름과 비밀번호를 사용하여 액세스 토큰을 얻는 방식
- **Client Credentials Grant**: 클라이언트 애플리케이션이 자신의 자격 증명을 사용하여 액세스 토큰을 얻는 방식


### 3.1 JWT란?

- JWT(JSON Web Token)는 JSON 형식의 자가 포함된 토큰으로, 클레임(claim)을 포함하여 사용자에 대한 정보를 전달한다.
- JWT는 세 부분으로 구성됩니다: 헤더, 페이로드, 서명
- JWT는 암호화를 통해 데이터의 무결성과 출처를 보장한다.
- https://jwt.io/

### 3.2 JWT의 주요 특징

- **자가 포함**: 토큰 자체에 모든 정보를 포함하고 있어 별도의 상태 저장이 필요 없다.
- **간결성**: 짧고 간결한 문자열로, URL, 헤더 등에 쉽게 포함될 수 있다.
- **서명 및 암호화**: 데이터의 무결성과 인증을 보장한다.

---
# 컨피그 서버 (Spring Cloud Config)


### 1.1 Spring Cloud Config란?

- Spring Cloud Config는 분산 시스템 환경에서 중앙 집중식 구성 관리를 제공하는 프레임워크.
- 애플리케이션의 설정을 중앙에서 관리하고, 변경 사항을 실시간으로 반영할 수 있다.
- Git, 파일 시스템, JDBC 등 다양한 저장소를 지원한다.

### 1.2 주요 기능

- **중앙 집중식 구성 관리**: 모든 마이크로서비스의 설정을 중앙에서 관리한다.
- **환경별 구성**: 개발, 테스트, 운영 등 환경별로 구성을 분리하여 관리할 수 있다.
- **실시간 구성 변경**: 설정 변경 시 애플리케이션을 재시작하지 않고도 실시간으로 반영할 수 있다.